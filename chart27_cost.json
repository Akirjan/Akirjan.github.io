{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 500,
    "height": 300,
    "view": {"stroke": "transparent"},
    "title": {
      "text": "Economic cost of gun violence",
      "fontSize": 12,
      "subtitle": [
        "On a per capita basis in each state. Source: Everystat, 2019"
      ],
      "subtitleFontStyle": "italic",
      "subtitleFontSize": 10
    },
    
    "data": {
      "url": "https://raw.githubusercontent.com/Akirjan/Akirjan.github.io/main/usamap.json",
      "format": {"property": "features"}
    },
  
    "projection": {"type": "albersUsa"},
    "mark": "geoshape", 
  
    "params": [
      {"name": "Select",
        "value": "All Firearm Injuries",
        "bind": {
          "input": "select",
          "options": [
           "All Firearm Injuries", 
           "Firearm Homicide and Assault (including Shooting by Police)", 
           "Firearm Suicide and Attempts", 
           "Firearm Injuries with No Known Intent"
           ]}}],
  
    "transform": [
              
        {"lookup": "properties.NAME",
            "from": {
                "data": {"url": "https://raw.githubusercontent.com/Akirjan/Akirjan.github.io/main/cost.json"},
                "key": "state",
                "fields": [       
                    "All Firearm Injuries", 
                    "Firearm Homicide and Assault (including Shooting by Police)", 
                    "Firearm Suicide and Attempts",
                     "Firearm Injuries with No Known Intent"]}},

          {"calculate": "datum[Select]","as": "varSelected"}],
 
    "encoding": {
      "color": {
        "field": "varSelected",
        "legend": {"title": null, "orient": "right", "direction": "vertical"},
        "type": "quantitative",
        "scale": {"scheme": "oranges", "reverse": false}
      },
      "tooltip": [
          {"field":"properties.NAME", "title": "State"},
         {"field":"varSelected", "title": "Economic cost per capita ($)", "format": ",d"}]
      
    }
  }